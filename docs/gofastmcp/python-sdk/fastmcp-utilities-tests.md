---
url: https://gofastmcp.com/python-sdk/fastmcp-utilities-tests
title: tests - FastMCP
scraped_at: 2025-11-03T18:43:11.520037
---

[Skip to main content](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#content-area)

Join the [FastMCP community](https://discord.gg/uu8dJCgttd)
!

[FastMCP home page![light logo](https://mintcdn.com/fastmcp/Lu2sdJVHDyHdvswk/assets/brand/wordmark.png?fit=max&auto=format&n=Lu2sdJVHDyHdvswk&q=85&s=67680e9b1c641023511881a24f296077)![dark logo](https://mintcdn.com/fastmcp/Lu2sdJVHDyHdvswk/assets/brand/wordmark-white.png?fit=max&auto=format&n=Lu2sdJVHDyHdvswk&q=85&s=776d9c0663633c9b9782b9f3f9785960)](https://gofastmcp.com/)

Search...

Navigation

fastmcp.utilities

tests

Search the docs...

Ctrl K

SDK Reference

*   [Python SDK](https://gofastmcp.com/python-sdk/fastmcp-exceptions)
    

*   [exceptions](https://gofastmcp.com/python-sdk/fastmcp-exceptions)
    

*   [mcp\_config](https://gofastmcp.com/python-sdk/fastmcp-mcp_config)
    

*   [settings](https://gofastmcp.com/python-sdk/fastmcp-settings)
    

##### fastmcp.cli

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-cli-__init__)
    
*   [cli](https://gofastmcp.com/python-sdk/fastmcp-cli-cli)
    
*   install
    
*   [run](https://gofastmcp.com/python-sdk/fastmcp-cli-run)
    

##### fastmcp.client

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-client-__init__)
    
*   auth
    
*   [client](https://gofastmcp.com/python-sdk/fastmcp-client-client)
    
*   [elicitation](https://gofastmcp.com/python-sdk/fastmcp-client-elicitation)
    
*   [logging](https://gofastmcp.com/python-sdk/fastmcp-client-logging)
    
*   [messages](https://gofastmcp.com/python-sdk/fastmcp-client-messages)
    
*   [oauth\_callback](https://gofastmcp.com/python-sdk/fastmcp-client-oauth_callback)
    
*   [progress](https://gofastmcp.com/python-sdk/fastmcp-client-progress)
    
*   [roots](https://gofastmcp.com/python-sdk/fastmcp-client-roots)
    
*   [sampling](https://gofastmcp.com/python-sdk/fastmcp-client-sampling)
    
*   [transports](https://gofastmcp.com/python-sdk/fastmcp-client-transports)
    

##### fastmcp.prompts

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-prompts-__init__)
    
*   [prompt](https://gofastmcp.com/python-sdk/fastmcp-prompts-prompt)
    
*   [prompt\_manager](https://gofastmcp.com/python-sdk/fastmcp-prompts-prompt_manager)
    

##### fastmcp.resources

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-resources-__init__)
    
*   [resource](https://gofastmcp.com/python-sdk/fastmcp-resources-resource)
    
*   [resource\_manager](https://gofastmcp.com/python-sdk/fastmcp-resources-resource_manager)
    
*   [template](https://gofastmcp.com/python-sdk/fastmcp-resources-template)
    
*   [types](https://gofastmcp.com/python-sdk/fastmcp-resources-types)
    

##### fastmcp.server

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-server-__init__)
    
*   auth
    
*   [context](https://gofastmcp.com/python-sdk/fastmcp-server-context)
    
*   [dependencies](https://gofastmcp.com/python-sdk/fastmcp-server-dependencies)
    
*   [elicitation](https://gofastmcp.com/python-sdk/fastmcp-server-elicitation)
    
*   [http](https://gofastmcp.com/python-sdk/fastmcp-server-http)
    
*   [low\_level](https://gofastmcp.com/python-sdk/fastmcp-server-low_level)
    
*   middleware
    
*   [openapi](https://gofastmcp.com/python-sdk/fastmcp-server-openapi)
    
*   [proxy](https://gofastmcp.com/python-sdk/fastmcp-server-proxy)
    
*   [server](https://gofastmcp.com/python-sdk/fastmcp-server-server)
    

##### fastmcp.tools

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-tools-__init__)
    
*   [tool](https://gofastmcp.com/python-sdk/fastmcp-tools-tool)
    
*   [tool\_manager](https://gofastmcp.com/python-sdk/fastmcp-tools-tool_manager)
    
*   [tool\_transform](https://gofastmcp.com/python-sdk/fastmcp-tools-tool_transform)
    

##### fastmcp.utilities

*   [\_\_init\_\_](https://gofastmcp.com/python-sdk/fastmcp-utilities-__init__)
    
*   [auth](https://gofastmcp.com/python-sdk/fastmcp-utilities-auth)
    
*   [cli](https://gofastmcp.com/python-sdk/fastmcp-utilities-cli)
    
*   [components](https://gofastmcp.com/python-sdk/fastmcp-utilities-components)
    
*   [exceptions](https://gofastmcp.com/python-sdk/fastmcp-utilities-exceptions)
    
*   [http](https://gofastmcp.com/python-sdk/fastmcp-utilities-http)
    
*   [inspect](https://gofastmcp.com/python-sdk/fastmcp-utilities-inspect)
    
*   [json\_schema](https://gofastmcp.com/python-sdk/fastmcp-utilities-json_schema)
    
*   [json\_schema\_type](https://gofastmcp.com/python-sdk/fastmcp-utilities-json_schema_type)
    
*   [logging](https://gofastmcp.com/python-sdk/fastmcp-utilities-logging)
    
*   [mcp\_config](https://gofastmcp.com/python-sdk/fastmcp-utilities-mcp_config)
    
*   mcp\_server\_config
    
*   [openapi](https://gofastmcp.com/python-sdk/fastmcp-utilities-openapi)
    
*   [tests](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests)
    
*   [types](https://gofastmcp.com/python-sdk/fastmcp-utilities-types)
    
*   [ui](https://gofastmcp.com/python-sdk/fastmcp-utilities-ui)
    

On this page

*   [fastmcp.utilities.tests](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#fastmcp-utilities-tests)
    
*   [Functions](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#functions)
    
*   [temporary\_settings](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#temporary-settings)
    
*   [run\_server\_in\_process](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#run-server-in-process)
    
*   [run\_server\_async](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#run-server-async)
    
*   [caplog\_for\_fastmcp](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#caplog-for-fastmcp)
    
*   [Classes](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#classes)
    
*   [HeadlessOAuth](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#headlessoauth)
    
*   [redirect\_handler](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#redirect-handler)
    
*   [callback\_handler](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#callback-handler)
    

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#fastmcp-utilities-tests)

`fastmcp.utilities.tests`
==================================================================================================================

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#functions)

Functions
------------------------------------------------------------------------------------

### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#temporary-settings)

`temporary_settings`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L25)

Copy

    temporary_settings(**kwargs: Any)
    

Temporarily override FastMCP setting values. **Args:**

*   `**kwargs`: The settings to override, including nested settings.

### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#run-server-in-process)

`run_server_in_process`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L76)

Copy

    run_server_in_process(server_fn: Callable[..., None], *args: Any, **kwargs: Any) -> Generator[str, None, None]
    

Context manager that runs a FastMCP server in a separate process and returns the server URL. When the context manager is exited, the server process is killed. **Args:**

*   `server_fn`: The function that runs a FastMCP server. FastMCP servers are not pickleable, so we need a function that creates and runs one.
*   `*args`: Arguments to pass to the server function.
*   `provide_host_and_port`: Whether to provide the host and port to the server function as kwargs.
*   `host`: Host to bind the server to (default: “127.0.0.1”).
*   `port`: Port to bind the server to (default: find available port).
*   `**kwargs`: Keyword arguments to pass to the server function.

**Returns:**

*   The server URL.

### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#run-server-async)

`run_server_async`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L144)

Copy

    run_server_async(server: FastMCP, port: int | None = None, transport: Literal['http', 'streamable-http', 'sse'] = 'http', path: str = '/mcp', host: str = '127.0.0.1') -> AsyncGenerator[str, None]
    

Start a FastMCP server as an asyncio task for in-process async testing. This is the recommended way to test FastMCP servers. It runs the server as an async task in the same process, eliminating subprocess coordination, sleeps, and cleanup issues. **Args:**

*   `server`: FastMCP server instance
*   `port`: Port to bind to (default: find available port)
*   `transport`: Transport type (“http”, “streamable-http”, or “sse”)
*   `path`: URL path for the server (default: “/mcp”)
*   `host`: Host to bind to (default: “127.0.0.1”)

### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#caplog-for-fastmcp)

`caplog_for_fastmcp`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L226)

Copy

    caplog_for_fastmcp(caplog)
    

Context manager to capture logs from FastMCP loggers even when propagation is disabled.

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#classes)

Classes
--------------------------------------------------------------------------------

### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#headlessoauth)

`HeadlessOAuth`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L237)

OAuth provider that bypasses browser interaction for testing. This simulates the complete OAuth flow programmatically by making HTTP requests instead of opening a browser and running a callback server. Useful for automated testing. **Methods:**

#### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#redirect-handler)

`redirect_handler`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L250)

Copy

    redirect_handler(self, authorization_url: str) -> None
    

Make HTTP request to authorization URL and store response for callback handler.

#### 

[​](https://gofastmcp.com/python-sdk/fastmcp-utilities-tests#callback-handler)

`callback_handler`[](https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L256)

Copy

    callback_handler(self) -> tuple[str, str | None]
    

Parse stored response and return (auth\_code, state).

[openapi\
\
Previous](https://gofastmcp.com/python-sdk/fastmcp-utilities-openapi)
[types\
\
Next](https://gofastmcp.com/python-sdk/fastmcp-utilities-types)

Ctrl+I

Assistant

Responses are generated using AI and may contain mistakes.